(function(e){function t(t){for(var s,r,o=t[0],c=t[1],l=t[2],p=0,d=[];p<o.length;p++)r=o[p],Object.prototype.hasOwnProperty.call(a,r)&&a[r]&&d.push(a[r][0]),a[r]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(e[s]=c[s]);u&&u(t);while(d.length)d.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],s=!0,o=1;o<n.length;o++){var c=n[o];0!==a[c]&&(s=!1)}s&&(i.splice(t--,1),e=r(r.s=n[0]))}return e}var s={},a={app:0},i=[];function r(t){if(s[t])return s[t].exports;var n=s[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=s,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)r.d(n,s,function(t){return e[t]}.bind(null,s));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/onesignal-pushnotifications-form/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var u=c;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";var s=n("85ec"),a=n.n(s);a.a},3953:function(e,t,n){"use strict";var s=n("564a"),a=n.n(s);a.a},"564a":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var s=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("Form")],1)},i=[],r=(n("f9e3"),n("2dd8"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.campaigns?n("div",{staticClass:"d-flex flex-column align-items-center justify-content-center",attrs:{id:"XID"}},[n("b-card",{staticClass:"w-75 p-3",attrs:{title:"Small intro"}},[n("b-card-text",[e._v(" Here you can see a page with some tables of the push notifications campaigns. ")]),n("b-card-text",[e._v("It is used for specifying and sending push notifications on your user's phones via OneSignal API.")]),n("b-card-text",[e._v("Enter user's ID. In this case it can be any number, as it is test page and test OneSignal keys.")]),n("b-card-text",[e._v("To start, please collapse any of Campaign below")]),n("b-card-text",[e._v("In the response field you can see how many notifications has been sent and how many of them were successful: recipients count. ")])],1),e._l(e.campaigns,(function(t,s){return n("b-container",{key:"campaign"+s,staticClass:"d-flex flex-column align-items-center justify-content-center mt-5"},[n("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle",value:"collapseCampaign"+s,expression:"'collapseCampaign' + index"}],staticClass:"m-1 w-25 p-3 mb-3",attrs:{variant:"outline-primary"}},[n("b-icon-plus-square-fill",{staticClass:"mr-1"}),e._v(" Collapse "+e._s(t.CampaignName)+" ")],1),n("b-collapse",{attrs:{id:"collapseCampaign"+s}},[n("table",{staticClass:"table"},[n("tbody",[n("tr",[n("th",{attrs:{scope:"row"}},[e._v("One Signal AppID")]),n("td",[e._v(e._s(t.OneSignalKeys.OneSignalAppID))])]),n("tr",[n("th",{attrs:{scope:"row"}},[e._v("Rest Api Key")]),n("td",[e._v(e._s(t.OneSignalKeys.RestApiKey))])]),n("tr",[n("th",{staticClass:"max-width-15",staticStyle:{cursor:"pointer"},attrs:{scope:"row"}},[n("span",{attrs:{id:"collapseUserIdHint"+s}},[e._v(" User Ids "),n("b-icon-question-circle",{staticClass:"ml-1"})],1),n("b-tooltip",{attrs:{target:"collapseUserIdHint"+s,triggers:"hover"}},[e._v(" Please, type here User's ID. If you have several, enter each separated by commas. ")])],1),n("td",[n("div",{staticClass:"input-group mb-3"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.userIDs[s],expression:"userIDs[index]"}],staticClass:"form-control",attrs:{"aria-label":"With textarea"},domProps:{value:e.userIDs[s]},on:{input:function(t){t.target.composing||e.$set(e.userIDs,s,t.target.value)}}})])])]),n("tr",[n("th",{staticStyle:{cursor:"pointer"},attrs:{scope:"row"}},[n("span",{attrs:{id:"collapseSendAfterHint"+s}},[e._v(" Send by schedule "),n("b-icon-question-circle",{staticClass:"ml-1"})],1),n("b-tooltip",{attrs:{target:"collapseSendAfterHint"+s,triggers:"hover"}},[e._v(" If you need to send after special time, you can enable this and put date and time that you need. ")])],1),n("td",[n("div",{staticClass:"custom-control custom-switch"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.showDateSendAfter[s],expression:"showDateSendAfter[index]"}],staticClass:"custom-control-input",staticStyle:{cursor:"pointer"},attrs:{id:"customSwitch1"+s,type:"checkbox"},domProps:{checked:Array.isArray(e.showDateSendAfter[s])?e._i(e.showDateSendAfter[s],null)>-1:e.showDateSendAfter[s]},on:{change:function(t){var n=e.showDateSendAfter[s],a=t.target,i=!!a.checked;if(Array.isArray(n)){var r=null,o=e._i(n,r);a.checked?o<0&&e.$set(e.showDateSendAfter,s,n.concat([r])):o>-1&&e.$set(e.showDateSendAfter,s,n.slice(0,o).concat(n.slice(o+1)))}else e.$set(e.showDateSendAfter,s,i)}}}),n("label",{staticClass:"custom-control-label",staticStyle:{cursor:"pointer"},attrs:{for:"customSwitch1"+s},on:{click:function(t){return e.changeShowDateSendAfter(s)}}},[e._v("Toggle this to enter date (optional)")])]),n("div",{staticClass:"text-muted mt-1 mb-3"},[e._v(" Push will be sent in time you've been chosen, BUT in user's timezone. ")]),n("div",{directives:[{name:"show",rawName:"v-show",value:e.showDateSendAfter[s],expression:"showDateSendAfter[index]"}],staticClass:"form-group mt-2"},[n("date-picker",{attrs:{type:"datetime"},model:{value:e.dateSendAfter[s],callback:function(t){e.$set(e.dateSendAfter,s,t)},expression:"dateSendAfter[index]"}})],1)])]),n("tr",[n("th",{attrs:{scope:"row"}},[e._v("Notification Title")]),n("td",[e._v(e._s(t.NotificationTitle))])]),n("tr",[n("th",{attrs:{scope:"row"}},[e._v("Notification Text:")]),n("td",[e._v(e._s(t.PushNotificationText))])]),n("tr",[n("th",{attrs:{scope:"row"}},[e._v("Deep Link")]),t.DeepLink?n("td",e._l(Object.keys(t.DeepLink),(function(a){return n("ul",{key:a+s},[n("li",{},[e._v(e._s(a)+": "+e._s(t.DeepLink[a]))])])})),0):n("td",[e._v(" No Data ")])]),n("tr",[n("th",{attrs:{scope:"row"}},[e._v("Platform")]),n("td",[n("div",{staticClass:"text-secondary mb-3"},[e._v("To only send to specific platforms, you may pass in true on one or more of these boolean parameters corresponding to the platform you wish to send to. If you do so, all other platforms will be set to false and will not be delivered to. ")]),e._l(Object.keys(t.Platform),(function(a){return n("ul",{key:a+s+"second"},[n("li",{},[e._v(e._s(a)+": "+e._s(t.Platform[a]||!1))])])}))],2)])])]),n("div",{staticClass:"w-100 d-flex justify-content-center"},[n("b-button",{staticClass:"m-1 w-25 p-3 mb-3",attrs:{variant:"outline-success"},on:{click:function(n){return e.pushCampaign(t,s)}}},[n("b-icon-chat-dots",{staticClass:"mr-1"}),e._v(" Send ")],1)],1),n("div",{staticClass:"card mb-3 mt-3"},[n("div",{staticClass:"card-body"},[n("h5",{staticClass:"card-title"},[e._v("Response")]),e.responses[s].response?n("div",[n("p",{staticClass:"card-text"},[e._v("Notifications has been sent: "+e._s(e.responses[s].response.sentNotificationsCount))]),n("p",{staticClass:"card-text"},[e._v("Recipients: "+e._s(e.responses[s].response.recipients))])]):n("div",[e._v(" Here will be response, press Send and please wait.")])])]),n("div",{staticClass:"text-center"},[n("p",{staticClass:"text-danger"},[e._v("End of Push Campaign")])])])],1)}))],2):e._e()}),o=[],c=(n("d81d"),n("ac1f"),n("1276"),n("498a"),n("5530")),l=(n("96cf"),n("1da1")),u={Campaigns:[{CampaignName:"test new ios",NotificationTitle:"This is new onesignal",PushNotificationText:"Please, click!",DeepLink:{EntityType:"1",EntityId:"1",Link:"google.com"},Platform:{Ios:!0,Android:!0},OneSignalKeys:{OneSignalAppID:"f394487e-f6fc-4bbe-9a9e-d138a3d81c81",RestApiKey:"YWRiZDI1OTktNzJlMi00YTAxLWIxMjktYmM3Yzc4ZGE4NjJh"}},{CampaignName:"TEst",NotificationTitle:"Hi",PushNotificationText:"Hi",DeepLink:{EntityType:"0",EntityId:"",Link:""},Platform:{Ios:"",Android:""},OneSignalKeys:{OneSignalAppID:"f394487e-f6fc-4bbe-9a9e-d138a3d81c81",RestApiKey:"YWRiZDI1OTktNzJlMi00YTAxLWIxMjktYmM3Yzc4ZGE4NjJh"}}]},p=u,d=(n("99af"),n("4de4"),n("4160"),n("13d5"),n("d3b7"),n("3ca3"),n("159b"),n("ddb0"),n("2ef0")),f=n.n(d),m=n("bc3a"),h=n.n(m),g=[],v={sentNotificationsCount:0,recipients:0},y=[];function b(e){if(y=[],e.UserIDs.length>1){var t=e.UserIDs;v.sentNotificationsCount=t.length,t=t.map((function(e){return{key:"UserId",field:"tag",value:e,relation:"="}})),t=f.a.chunk(t,100),y=t.map((function(e){return e=e.reduce((function(e,t){return e.concat(t,{operator:"OR"})}),[]),e.pop(),e}))}else 1===e.UserIDs.length&&(y=[],v.sentNotificationsCount=1,e.UserIDs[0]&&y.push([{key:"UserId",field:"tag",value:e.UserIDs[0],relation:"="}]),""===e.UserIDs[0]&&y.push([{operator:"OR"}]))}function w(e,t){var n={app_id:t.OneSignalAppID,contents:{en:t.PushNotificationText},headings:{en:t.NotificationTitle},filters:e,isIos:t.Platform.Ios,isAndroid:t.Platform.Android,ios_badgeType:"SetTo",ios_badgeCount:"0",android_background_data:"true",data:t.DeepLink&&t.DeepLink.EntityType?t.DeepLink:{}};return t.sendAfter&&(n.send_after=t.sendAfter,n.delayed_option="timezone"),Object(c["a"])({},n)}function S(e){var t=e.filter((function(e){return 200===e.status}));v.recipients=t.reduce((function(e,t){return e+t.data.recipients}),0)}function _(e){return A.apply(this,arguments)}function A(){return A=Object(l["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.UserIDs.length){e.next=11;break}return b(t),y.forEach((function(e){var n={method:"POST",url:"https://onesignal.com/api/v1/notifications",data:w(e,t),headers:{"Content-Type":"application/json; charset=utf-8",Authorization:"Basic ".concat(t.RestApiKey)},json:!0};g.push(h()(n))})),e.next=5,Promise.all(g);case 5:return n=e.sent,e.next=8,S(n);case 8:return e.abrupt("return",{response:v});case 11:throw new Error("No User's ID");case 12:case"end":return e.stop()}}),e)}))),A.apply(this,arguments)}var D=n("ec45"),C=(n("411c"),{name:"Form",components:{DatePicker:D["a"]},data:function(){return{campaigns:p.Campaigns,oneSignalKeys:p.oneSignalKeys,recipients:0,userIDs:p.Campaigns.map((function(){return""})),hideCampaign:!1,responses:p.Campaigns.map((function(){return"here will be response"})),visible:p.Campaigns.map((function(){return!1})),dateSendAfter:p.Campaigns.map((function(){return""})),showDateSendAfter:p.Campaigns.map((function(){return!1}))}},methods:{pushCampaign:function(e,t){var n=this;return Object(l["a"])(regeneratorRuntime.mark((function s(){var a;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return a=n.createNewCampaign(e,t),s.t0=n,s.t1=n.responses,s.t2=t,s.next=6,_(a);case 6:s.t3=s.sent,s.t0.$set.call(s.t0,s.t1,s.t2,s.t3),n.repeatCampaignFilters=n.responses[t].response.repeatCampaignFilters;case 9:case"end":return s.stop()}}),s)})))()},createNewCampaign:function(e,t){var n=Object(c["a"])(Object(c["a"])({},e),{},{UserIDs:this.userIDs[t]&&this.userIDs[t].length?this.userIDs[t].split(",").map((function(e){return e.trim()})):[""],RestApiKey:this.oneSignalKeys?this.oneSignalKeys.RestApiKey:e.OneSignalKeys.RestApiKey,OneSignalAppID:this.oneSignalKeys?this.oneSignalKeys.OneSignalAppID:e.OneSignalKeys.OneSignalAppID});return delete n.CampaignName,delete n.OneSignalKeys,this.showDateSendAfter[t]&&this.dateSendAfter[t]?n.sendAfter=this.dateSendAfter[t]:n.sendAfter=null,n},changeShowDateSendAfter:function(e){this.showDateSendAfter[e]=!this.showDateSendAfter[e]}}}),x=C,I=(n("3953"),n("2877")),O=Object(I["a"])(x,r,o,!1,null,null,null),k=O.exports,N={name:"App",components:{Form:k},data:function(){return{}},methods:{}},T=N,P=(n("034f"),Object(I["a"])(T,a,i,!1,null,null,null)),j=P.exports,K=n("5f5b"),R=n("b1e0");s["default"].config.productionTip=!1,s["default"].use(K["a"]),s["default"].use(R["b"]),s["default"].use(R["a"]),new s["default"]({render:function(e){return e(j)}}).$mount("#app")},"85ec":function(e,t,n){}});
//# sourceMappingURL=app.39a7befc.js.map